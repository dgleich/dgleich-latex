%%
%% dgleich-setup.sty
%% Copyright, David Gleich, 2011
%%
%% common definitions and macros that can be used with any style package
%%

% License:
% This program is free software; you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation; either version 2 of the License, or
% (at your option) any later version.
%
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with this program; see the file COPYING.  If not, write to
% the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
% Boston, MA 02111-1307, USA.

\NeedsTeXFormat{LaTeX2e}[1994/06/01]

\ProvidesClass{dgleich-setup}[2011/06/04 v0.1 dgleich-setup class]

%% Packages
\RequirePackage{array}
\RequirePackage{graphicx}
\RequirePackage{tabularx}
\RequirePackage{booktabs}
\RequirePackage{ragged2e}
\RequirePackage{setspace}
\RequirePackage{xcolor}
\RequirePackage{textcomp} 
\RequirePackage{xspace}
\RequirePackage{microtype}
\RequirePackage{paralist}
\RequirePackage{listings}

%% Options
\DeclareOption{overfull}{\overfullrule=10pt}
\DeclareOption{overfullslug}{\overfullrule=10pt}

\ProcessOptions

%% Hypenation
\hyphenation{Page-Rank}


%% Colors
\colorlet{TufteRed}{red!80!black}
\definecolor{halfgray}{gray}{0.55}


\definecolor{subtleblue}     {rgb}{0.02,0.04,0.48}
\definecolor{subtlered}      {rgb}{0.65,0.04,0.07} % RGB 165,10,18
\definecolor{subtlegreen}    {rgb}{0.06,0.44,0.08}
\definecolor{subtledarkblue} {rgb}{0,.1,.6}
\definecolor{lightsubtleblue}{rgb}{0,.4,.6}
\definecolor{ecru}           {rgb}{1.0,.98823,.95686}   

\definecolor{stanfordred}      {rgb}{0.6431,0.000,0.1137} 

\definecolor{stanfordsandstone}{rgb}{0.9059,0.8196,0.6039}
\definecolor{stanfordblue}     {rgb}{0.1451,0.5176,0.7333}
\definecolor{stanfordgreen}    {rgb}{0.1608,0.3961,0.2863} % rgb 41/101/73
\definecolor{stanforddarkgray} {rgb}{0.2627,0.2902,0.2667} % rgb 67/74/68
\definecolor{stanfordlightgray}{rgb}{0.8392,0.8667,0.8275} % rgb 214/221/211
\definecolor{stanforddarkgreen}{rgb}{0.2353,0.2118,0.1373}
\definecolor{stanforddeepred}  {rgb}{0.6510,0.2275,0.0000}
\definecolor{stanfordneutralkhaki}{rgb}{0.5686,    0.5333,    0.4510}
\definecolor{stanfordbrightgreen}{rgb}{0.0039 ,   0.5137  ,  0.3725}
\definecolor{stanfordbrightblue}{rgb}{0.1451,0.5176, 0.7333} 
\definecolor{stanfordbrightseagreen}{rgb}{0.0000,0.5020,0.5529} % rgb 0/128/141
\definecolor{stanfordbrightyellow}{rgb}{0.9412,0.6863,0.0000} % rgb 240/175/0
\definecolor{stanfordbrightwine}{rgb}{0.2353,0.0667,0.0275}


%% Commands
%\newcommand{\email}[1]{\textsf{#1}}
\newcommand{\acro}[1]{\textsc{\MakeTextLowercase{#1}}}

%% Columns
\newcommand{\PreserveBackslash}[1]{\let\temp=\\#1\let\\=\temp}
\newcolumntype{L}[1]{>{\PreserveBackslash\RaggedRight}m{#1}}
\newcolumntype{M}[1]{>{\PreserveBackslash\RaggedRight}p{#1}}
\newcolumntype{R}[1]{>{\PreserveBackslash\RaggedLeft}m{#1}}
\newcolumntype{S}[1]{>{\PreserveBackslash\RaggedLeft}p{#1}}
\newcolumntype{Z}[1]{>{\PreserveBackslash\Centering}m{#1}}
\newcolumntype{A}[1]{>{\PreserveBackslash\Centering}p{#1}}

\newcolumntype{U}{>{\setlength{\RaggedRightParindent}{0pt}\RaggedRight\arraybackslash\noindent}X}
\newcolumntype{V}{>{\RaggedLeft\arraybackslash}X}
\newcolumntype{W}{>{\Centering\arraybackslash}X}

\@ifundefined{texorpdfstring}{%
  \newcommand{\famp}[1][\relax]{{\protect\mbox{\fontshape\itdefault#1\textit{\&}}}}%
}{%
  \newcommand{\famp}[1][\relax]{{\texorpdfstring{\protect\mbox{\fontshape\itdefault#1\textit{\&}}}{and}}}%
}

%\newcolumntype{H}{>{\fontseries{b}\selectfont%
  %\columncolor{shadecolor}[6pt][0pt]}l}
%\newcolumntype{I}{>{\fontseries{b}\selectfont%
  %\columncolor{shadecolor}[6pt][0pt]}c}
%\newcolumntype{J}{>{\fontseries{b}\selectfont%
  %\columncolor{shadecolor}[6pt][0pt]}r}
%\newcommand{\hdcell}[2]{%
  %\multicolumn{1}{#1@{}}{%
    %\raisebox{.1mm}{%
      %#2%
    %}\rule{0pt}{4mm}}
%}


% figure paths
\graphicspath{{.}{./figures/}}
\providecommand{\lstbasicfont}{\fontfamily{lmtt}\selectfont}
\lstset{%
  basicstyle={\lstbasicfont\footnotesize},    % use font and smaller size
  showstringspaces=false,                     % do not emphasize spaces in strings
  tabsize=4,                                  % number of spaces of a TAB
  mathescape=true,escapechar=�,               % escape to latex with �...�
  aboveskip={\abovedisplayskip},               % a bit of space above
  belowskip={\belowdisplayskip},               % a bit of space below
  columns=fixed,                              % nice spacing
  xleftmargin=1cm,
  xrightmargin=1cm,
  %
  % the following is for replacing some matlab relations like >= or ~=
  % by the corresponding LaTeX symbols, which are much easier to read ...
  %literate=%
  %  {~}{{$\neg$}}1 %            \neg
  %  {<=}{{\tiny$\leq$}}1 %      \leq
  %  {>=}{{\tiny$\geq$}}1 %      \geq
  %  {~=}{{\tiny$\neq$}}1 %      \neq
  %  {delta}{{\tiny$\Delta$}}1%  \Delta
  inputencoding=utf8,
  extendedchars=true,
  literate=%
    {α}{{\alpha}}1% 
    {γ}{{\gamma}}1 
}
\lstnewenvironment{pseudocode}[1][]{%
  \lstset{language=python,#1%             % use our version of highlighting
  }%
}{}

\lstdefinelanguage{Julia}%
  {morekeywords={abstract,break,case,catch,const,continue,do,else,elseif,%
      end,export,false,for,function,immutable,import,importall,if,in,%
      macro,module,otherwise,quote,return,switch,true,try,type,typealias,%
      using,while},%
   sensitive=true,%
   alsoother={$},%
   morecomment=[l]\#,%
   morecomment=[n]{\#=}{=\#},%
   morestring=[s]{"}{"},%
   morestring=[m]{'}{'},%
}[keywords,comments,strings]%

\lstdefinelanguage{matlabfloz}{%
  alsoletter={...},%
  morekeywords={%                             % keywords
  break,case,catch,continue,elseif,else,end,for,function,global,%
  if,otherwise,persistent,return,switch,try,while,...,ones,zeros,eye},%
  comment=[l]\%,%                             % comments
  morecomment=[l]...,%                        % comments
  morestring=[m]',%                           % strings 
}[keywords,comments,strings]%


\lstnewenvironment{dispmcode}{%
    \lstset{language=matlabfloz,%
      numbers=none,frame=none,%
      keywordstyle=\color{subtleblue},%,          % keywords
      commentstyle=\color{thegreen},%         % comments
      stringstyle=\color{subtleed}%             % strings
    }%
  }%
  {}


\lstnewenvironment{dispmresults}{%
    \lstset{language=matlabfloz,%
      numbers=none,frame=none,backgroundcolor=\color{ecru},%
      keywordstyle=\color{theblue},%,          % keywords
      commentstyle=\color{subtlegreen},%         % comments
      stringstyle=\color{subtlered}%             % strings
    }%
  }%
  {}

\lstnewenvironment{numberedmcode}{%
    \lstset{language=matlabfloz,%
      numbers=left,frame=none,%
      keywordstyle=\color{subtleblue},%,          % keywords
      commentstyle=\color{subtlegreen},%         % comments
      stringstyle=\color{subtlered}%             % strings
    }%
  }%
  {}


\lstnewenvironment{dispjulia}{%
    \lstset{language=Julia,%
      numbers=none,frame=none,%
      keywordstyle=\color{subtleblue},%,          % keywords
      commentstyle=\color{thegreen},%         % comments
      stringstyle=\color{subtleed}%             % strings
    }%
  }%
  {}

\lstnewenvironment{numberedjulia}{%
    \lstset{language=Julia,%
      numbers=left,frame=none,%
      keywordstyle=\bfseries\color{subtleblue},%,          % keywords
      commentstyle=\color{subtlegreen},%         % comments
      stringstyle=\color{subtlered}%             % strings
    }%
  }%
  {}
  
\lstnewenvironment{jlcode}{%
    \lstset{language=Julia,%
      numbers=left,frame=none,%
      keywordstyle=\bfseries\color{subtleblue},%,          % keywords
      commentstyle=\color{subtlegreen},%         % comments
      stringstyle=\color{subtlered}%             % strings
    }%
  }%
  {}
  
\lstnewenvironment{jlcode*}{%
    \lstset{language=Julia,%
      numbers=none,frame=none,%
      keywordstyle=\bfseries\color{subtleblue},%,          % keywords
      commentstyle=\color{subtlegreen},%         % comments
      stringstyle=\color{subtlered}%             % strings
    }%
  }%
  {} 
